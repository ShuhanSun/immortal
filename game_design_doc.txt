《凡人修仙传 Origin》 最终版游戏设计文档
按照更新的设计文档修改游戏


类型: 修仙模拟 / 开放世界 RPG

1. 核心视觉与美术风格
所有复杂图像需先通过图像生成模型生成好，然后存储在asset 文件夹中，生成一次永久使用。
1.1 整体基调
* 色彩: 采用深色调（Stone-950）作为主背景，辅以琥珀色（Amber）、翡翠绿（Emerald）、青色（Cyan）作为灵力与交互的高亮色，营造古朴、厚重且神秘的修仙氛围。
* 材质感: UI 组件大量使用边框纹理、磨砂玻璃效果（Backdrop Blur）和内阴影，模拟玉简、石碑与羊皮卷的质感。

1.2 洞府全景天象系统 (核心视觉)
* 全屏沉浸: 洞府静室背景不再是静态图片，而是基于 CSS 动画构建的动态天穹。高度要高。
* 日月轮转: 
   * 白昼 (吸气): 金色烈阳（带强日冕光晕）从左下方地平线升起，沿拱形轨迹划过天顶，至右下方落下。
   背景从黑色星空，到太阳在正上方时逐渐变亮。
   太阳从正上方到最下方的过程中： 逐渐变暗，最后显示出黑色星空。
   * 黑夜 (呼气): 银色皓月（带冷色光晕）接替太阳轨迹。背景转为深邃的星空，粒子星光闪烁。
   太阳和月亮的尺寸调小，视觉比例更协调。
   日月轨迹优化：重新计算了太阳和月亮的运行轨迹。现在它们以画面底部中央（人物位置）为圆心，在屏幕边框范围内进行半圆周运动（左升右落），不再会因为半径过大而跑出屏幕。
* 星空也要缓慢选择，速度远低于日月。

* 人物动态: 在中央底部位置，留出顶部星空的空间，显示地面
   * 站立态: 停止修炼时，人物剪影呈站立背手姿态，衣袂飘飘，动态效果。
   * 打坐态: 开始吐纳后，人物自动盘膝而坐，双手掐诀。两侧点着香炉冒着烟
* 经脉光效: 修练时，一道金色的灵光带在人物体内上下游走，模拟“大周天”搬运（吸气上升，呼气下沉）。

* ’开始/停止吐纳‘的按钮移动到洞府静室框的最底部。 




2. 核心玩法系统
人物属性：
年龄与寿元


2.1 修炼与境界体系
* 吐纳机制:
   * 手动开启/停止。
   * 时间流逝: 1秒现实时间 = 1日修仙时间。
   * 计时显示在下方: 采用古文数字格式（如：入定 一载 三月 五日）。
   * 互斥性: 外出历练或受重伤会自动打断吐纳。
   * 修为增加时，进度条显示波动的特效。 寿元增加时寿元数显示特效。当过去一年时，骨龄数字显示特效。

* 境界层级:
   * 炼气期 (1-13层): 基础阶段，每层提升少量属性。 初始值60年寿命，每多一层增加3年寿命。
   * 筑基期 (初/中/后): 属性大幅飞跃，寿元：200，300，400年
   * 结丹期 (初/中/后): 属性大幅飞跃，寿元： 500，600，700年
   * 元婴期 (初/中/后): 属性大幅飞跃，寿元：1000， 1500， 2000年
   * 化神期 (初/中/后): 属性大幅飞跃，寿元：2000， 2500， 3000年
   * 炼虚期 (初/中/后): 属性大幅飞跃，寿元：3000， 4000， 5000年
   * 合体期 (初/中/后): 属性大幅飞跃，寿元：5000， 6000， 7000年
   * 大乘期 (初/中/后): 属性大幅飞跃，寿元：8000， 10000， 20000年

* 瓶颈系统:
   * 当进度条达到 95% 时，触发瓶颈。（不要警示框）
   * 视觉反馈: 在修为进度条变红，显示 [瓶颈] 字样与锁图标。
   * 限制: 此时无法通过吐纳继续增加修为。
   * 突破: 需点击“瓶颈提示”或使用特定丹药（如筑基丹）进行冲关。突破成功播放全屏金色庆典动画并显示新境界名称；失败则触发“走火入魔”特效（屏幕泛红、人物倒地），并扣除大量气血。

* 寿元系统:
   * 界面顶部实时显示 骨龄 / 寿元上限。
   * 随着吐纳进行，骨龄自动增长。
   * 突破大境界可增加寿元上限。


2.2 掌天瓶与灵药园 (资源核心)
* 掌天瓶 [images.png Bottle]:
   * 视觉: 放置于药园中央，细颈圆腹细高的半透明墨绿色玉净瓶造型，周围环绕银色灵光。下方显示药田图片。
   * 充能: 自动吸纳月华，凝聚绿液（进度条与液滴可视化，满100点聚为一滴，共10滴）。
   * 催熟动画: 点击催熟时，瓶身倾斜，滴下绿液，灵药光芒大盛。
* 种植体系:
   * 选种: 点击空田，弹出储物袋选择特定种子。
   * 动态生长: * 幼苗（白色） -> 百年灵草（淡金色，逐渐加深） -> 千年灵草（深紫金色）。
      * 灵草外观随年份改变颜色与光效强弱。
   * 双操作模式:
      * [催熟] (绿色按钮): 消耗绿液，增加100年药龄。
      * [收获] (黄色按钮): 收取灵药。高年份灵药（如500年）收获时保持为一株高阶素材，而非拆分。


2.3 炼丹系统
* 视觉表现: 具象化的三足炼丹炉[images.png Cauldron]，底部地火动态燃烧。
* 操作流程:
   1. 点击“添加药草”，从储物袋选择主材。
   2. 动态概率: 系统根据放入药草的年份自动判定成功率（普通5%，每多一百年增加10%，千年100%）。
   3. 炼制过程: 炉火旺盛，进度条推进，操作锁定。
   4. 结果反馈:
      * 成功: 炉盖开启，金光爆闪，丹药悬浮，自动收取：炼丹成功后，无需再手动点击，系统会自动将丹药收入囊中并重置炼丹炉状态
      * 失败 (炸炉): 炉身剧烈抖动，黑烟滚滚（粒子特效），伴随爆炸音效。
      * 修复: 炼制结束后状态自动重置，允许进行下一次炼制。


2.4 战斗与历练系统
* 外出历练:
   * 御剑飞行: 播放全屏/窗口化修士站在飞剑上飞行的动画，背景飞速后退，伴随风声，底部显示群山图片，飞速后退。
   * 随机事件: 包含文本流程（“飞越荒山”、“神识扫描”），结果可能是发现宝物、遭遇妖兽或一无所获。
* 回合制战斗:
   * 布局: 左右分立，左侧妖兽（骷髅图标），右侧玩家（持剑小人）。
   * 数值可视化: 双方均有动态 HP/MP 条，伤害数字跳出。
   * 流程: 玩家攻击 -> 动画/音效 -> 结算 -> 敌人反击 -> 动画/音效 -> 结算。
   * 策略性: * 储物袋快捷栏: 战斗中可直接点击使用符箓（攻击）、丹药（回血）或法器。
      * 境界压制: 遭遇高境界敌人会有红色高危警告。
   * 战利品结算: 胜利后弹出结算面板，展示掉落物，需手动“拾取”归仓。
   * 逃跑: 概率成功，成功后播放“隐匿飞遁”字特效并撤离。

2.5 “坊市“ 系统
买卖物品

3. 交互与 UI 设计 (UX)
3.1 随身储物袋
* 随身储物袋：现在已移动到左侧导航栏，成为一个独立的“储物袋”页面，不再占用洞府界面。
* 点击展开: 点击后展开为横向网格，显示物品图标与数量。物品图标固定大小，不自动拉伸。
* 物品详情: 点击任意物品，弹出详细卡片，包含：
   * 大尺寸图标。
   * 物品描述与功能。
   * 操作按钮（使用/装备/关闭）。
* 装备反馈: 已装备的法器在格子中会有青色高亮边框和角标。

3.2 玩家属性面板
* 点击顶部头像区域触发。
* 显示详细属性：境界， 攻击（基础+加成）、防御、神识距离 单位：里。
* 五行灵根图：新增了一个动态绘制的五边形雷达图，展示金木水火土的数值（1-10）。
* 功法列表: 列出已学习的功法及其提供的具体被动加成（如：长春功 - 修炼速度 x1.1）。

3.3 全局反馈
* Toast 提示: 所有操作（获得物品、属性变动、炼丹结果）均有屏幕中央的浮动文字提示。
* 关闭按钮: 所有弹窗（模态框）右上角均增加了显眼的 [X] 关闭按钮。


4. 音效设计 (Web Audio API)
* 环境音: 吐纳时的呼吸声（Triangle波形模拟）。
* UI 音效: 按钮点击的清脆短音。
* 外出飞行音效
   * 飞剑破空声（Sawtooth波形）。
* 战斗音效: 
   * 击中敌人的闷响。
   * 符箓爆炸的噪声。
* 事件音效:
   * 突破成功的激昂和弦。
   * 炼丹成功的清脆提示音。
   * 炸炉的低频轰鸣。
   * 掌天瓶滴液的水滴声。


5. 数据结构与扩展性
* 物品库 (ITEMS): 包含类型（材料/丹药/法器/功法）、数值、图标引用。
* 境界库 (REALMS): 定义每层所需的经验、血量上限、寿元上限及突破所需丹药。
* 敌人库 (ENEMIES): 定义不同层级的妖兽数据与掉落。
* 存档: 使用 localStorage 实现自动保存与读取，确保刷新不丢档。

总结: 构建了一个拥有完整核心循环（修炼-资源-战斗-突破）的修仙游戏原型。视觉上通过 CSS 动画和 SVG 实现了较高的沉浸感，交互上解决了早期的易用性问题，还原了《凡人修仙传》中“资源为王、谨慎修仙”的核心体验。